import pytest


@pytest.fixture()
def cases():
    out1 = ({
        'BHS': {'car': 'SCUDERIA TORO ROSSO HONDA',
                'fullname': 'Brendon Hartley',
                'pos': 16,
                'time': '1:01:13.179000',
                'time_f': '2018-05-24 13:16:05.164000',
                'time_s': '2018-05-24 12:14:51.985000'},
        'CLS': {'car': 'SAUBER FERRARI',
                'fullname': 'Charles Leclerc',
                'pos': 10,
                'time': '1:01:12.829000',
                'time_f': '2018-05-24 13:10:54.750000',
                'time_s': '2018-05-24 12:09:41.921000'},
        'CSR': {'car': 'RENAULT',
                'fullname': 'Carlos Sainz',
                'pos': 14,
                'time': '1:01:12.950000',
                'time_f': '2018-05-24 13:04:28.095000',
                'time_s': '2018-05-24 12:03:15.145000'},
        'DRR': {'car': 'RED BULL RACING TAG HEUER',
                'fullname': 'Daniel Ricciardo',
                'pos': 4,
                'time': '0:57:12.013000',
                'time_f': '2018-05-24 13:11:24.067000',
                'time_s': '2018-05-24 12:14:12.054000'},
        'EOF': {'car': 'FORCE INDIA MERCEDES',
                'fullname': 'Esteban Ocon',
                'pos': 2,
                'time': '0:54:13.028000',
                'time_f': '2018-05-24 13:12:11.838000',
                'time_s': '2018-05-24 12:17:58.810000'},
        'FAM': {'car': 'MCLAREN RENAULT',
                'fullname': 'Fernando Alonso',
                'pos': 9,
                'time': '1:01:12.657000',
                'time_f': '2018-05-24 13:14:17.169000',
                'time_s': '2018-05-24 12:13:04.512000'},
        'KMH': {'car': 'HAAS FERRARI',
                'fullname': 'Kevin Magnussen',
                'pos': 19,
                'time': '1:01:13.393000',
                'time_f': '2018-05-24 13:04:04.396000',
                'time_s': '2018-05-24 12:02:51.003000'},
        'KRF': {'car': 'FERRARI',
                'fullname': 'Kimi RГ¤ikkГ¶nen',
                'pos': 8,
                'time': '1:01:12.639000',
                'time_f': '2018-05-24 13:04:13.889000',
                'time_s': '2018-05-24 12:03:01.250000'},
        'LHM': {'car': 'MERCEDES',
                'fullname': 'Lewis Hamilton',
                'pos': 1,
                'time': '0:53:12.460000',
                'time_f': '2018-05-24 13:11:32.585000',
                'time_s': '2018-05-24 12:18:20.125000'},
        'LSW': {'car': 'WILLIAMS MERCEDES',
                'fullname': 'Lance Stroll',
                'pos': 18,
                'time': '1:01:13.323000',
                'time_f': '2018-05-24 13:07:26.834000',
                'time_s': '2018-05-24 12:06:13.511000'},
        'MES': {'car': 'SAUBER FERRARI',
                'fullname': 'Marcus Ericsson',
                'pos': 17,
                'time': '1:01:13.265000',
                'time_f': '2018-05-24 13:05:58.778000',
                'time_s': '2018-05-24 12:04:45.513000'},
        'NHR': {'car': 'RENAULT',
                'fullname': 'Nico Hulkenberg',
                'pos': 15,
                'time': '1:01:13.065000',
                'time_f': '2018-05-24 13:04:02.979000',
                'time_s': '2018-05-24 12:02:49.914000'},
        'PGS': {'car': 'SCUDERIA TORO ROSSO HONDA',
                'fullname': 'Pierre Gasly',
                'pos': 13,
                'time': '1:01:12.941000',
                'time_f': '2018-05-24 13:08:36.586000',
                'time_s': '2018-05-24 12:07:23.645000'},
        'RGH': {'car': 'HAAS FERRARI',
                'fullname': 'Romain Grosjean',
                'pos': 12,
                'time': '1:01:12.930000',
                'time_f': '2018-05-24 13:06:27.441000',
                'time_s': '2018-05-24 12:05:14.511000'},
        'SPF': {'car': 'FORCE INDIA MERCEDES',
                'fullname': 'Sergio Perez',
                'pos': 11,
                'time': '1:01:12.848000',
                'time_f': '2018-05-24 13:13:13.883000',
                'time_s': '2018-05-24 12:12:01.035000'},
        'SSW': {'car': 'WILLIAMS MERCEDES',
                'fullname': 'Sergey Sirotkin',
                'pos': 3,
                'time': '0:55:12.706000',
                'time_f': '2018-05-24 13:11:24.354000',
                'time_s': '2018-05-24 12:16:11.648000'},
        'SVF': {'car': 'FERRARI',
                'fullname': 'Sebastian Vettel',
                'pos': 5,
                'time': '1:01:04.415000',
                'time_f': '2018-05-24 13:04:03.332000',
                'time_s': '2018-05-24 12:02:58.917000'},
        'SVM': {'car': 'MCLAREN RENAULT',
                'fullname': 'Stoffel Vandoorne',
                'pos': 7,
                'time': '1:01:12.463000',
                'time_f': '2018-05-24 13:19:50.198000',
                'time_s': '2018-05-24 12:18:37.735000'},
        'VBM': {'car': 'MERCEDES',
                'fullname': 'Valtteri Bottas',
                'pos': 6,
                'time': '1:01:12.434000',
                'time_f': '2018-05-24 13:01:12.434000',
                'time_s': '2018-05-24 12:00:00'}})
    out2 = ({
        'SVF': {'car': 'FERRARI',
                'fullname': 'Sebastian Vettel',
                'pos': 1,
                'time': '1:01:04.415000',
                'time_f': '2018-05-24 13:04:03.332000',
                'time_s': '2018-05-24 12:02:58.917000'}})
    out3 = ({
        'BHS': {'car': 'SCUDERIA TORO ROSSO HONDA',
                'fullname': 'Brendon Hartley',
                'pos': 4,
                'time': '1:01:13.179000',
                'time_f': '2018-05-24 13:16:05.164000',
                'time_s': '2018-05-24 12:14:51.985000'},
        'CLS': {'car': 'SAUBER FERRARI',
                'fullname': 'Charles Leclerc',
                'pos': 10,
                'time': '1:01:12.829000',
                'time_f': '2018-05-24 13:10:54.750000',
                'time_s': '2018-05-24 12:09:41.921000'},
        'CSR': {'car': 'RENAULT',
                'fullname': 'Carlos Sainz',
                'pos': 6,
                'time': '1:01:12.950000',
                'time_f': '2018-05-24 13:04:28.095000',
                'time_s': '2018-05-24 12:03:15.145000'},
        'DRR': {'car': 'RED BULL RACING TAG HEUER',
                'fullname': 'Daniel Ricciardo',
                'pos': 16,
                'time': '0:57:12.013000',
                'time_f': '2018-05-24 13:11:24.067000',
                'time_s': '2018-05-24 12:14:12.054000'},
        'EOF': {'car': 'FORCE INDIA MERCEDES',
                'fullname': 'Esteban Ocon',
                'pos': 18,
                'time': '0:54:13.028000',
                'time_f': '2018-05-24 13:12:11.838000',
                'time_s': '2018-05-24 12:17:58.810000'},
        'FAM': {'car': 'MCLAREN RENAULT',
                'fullname': 'Fernando Alonso',
                'pos': 11,
                'time': '1:01:12.657000',
                'time_f': '2018-05-24 13:14:17.169000',
                'time_s': '2018-05-24 12:13:04.512000'},
        'KMH': {'car': 'HAAS FERRARI',
                'fullname': 'Kevin Magnussen',
                'pos': 1,
                'time': '1:01:13.393000',
                'time_f': '2018-05-24 13:04:04.396000',
                'time_s': '2018-05-24 12:02:51.003000'},
        'KRF': {'car': 'FERRARI',
                'fullname': 'Kimi RГ¤ikkГ¶nen',
                'pos': 12,
                'time': '1:01:12.639000',
                'time_f': '2018-05-24 13:04:13.889000',
                'time_s': '2018-05-24 12:03:01.250000'},
        'LHM': {'car': 'MERCEDES',
                'fullname': 'Lewis Hamilton',
                'pos': 19,
                'time': '0:53:12.460000',
                'time_f': '2018-05-24 13:11:32.585000',
                'time_s': '2018-05-24 12:18:20.125000'},
        'LSW': {'car': 'WILLIAMS MERCEDES',
                'fullname': 'Lance Stroll',
                'pos': 2,
                'time': '1:01:13.323000',
                'time_f': '2018-05-24 13:07:26.834000',
                'time_s': '2018-05-24 12:06:13.511000'},
        'MES': {'car': 'SAUBER FERRARI',
                'fullname': 'Marcus Ericsson',
                'pos': 3,
                'time': '1:01:13.265000',
                'time_f': '2018-05-24 13:05:58.778000',
                'time_s': '2018-05-24 12:04:45.513000'},
        'NHR': {'car': 'RENAULT',
                'fullname': 'Nico Hulkenberg',
                'pos': 5,
                'time': '1:01:13.065000',
                'time_f': '2018-05-24 13:04:02.979000',
                'time_s': '2018-05-24 12:02:49.914000'},
        'PGS': {'car': 'SCUDERIA TORO ROSSO HONDA',
                'fullname': 'Pierre Gasly',
                'pos': 7,
                'time': '1:01:12.941000',
                'time_f': '2018-05-24 13:08:36.586000',
                'time_s': '2018-05-24 12:07:23.645000'},
        'RGH': {'car': 'HAAS FERRARI',
                'fullname': 'Romain Grosjean',
                'pos': 8,
                'time': '1:01:12.930000',
                'time_f': '2018-05-24 13:06:27.441000',
                'time_s': '2018-05-24 12:05:14.511000'},
        'SPF': {'car': 'FORCE INDIA MERCEDES',
                'fullname': 'Sergio Perez',
                'pos': 9,
                'time': '1:01:12.848000',
                'time_f': '2018-05-24 13:13:13.883000',
                'time_s': '2018-05-24 12:12:01.035000'},
        'SSW': {'car': 'WILLIAMS MERCEDES',
                'fullname': 'Sergey Sirotkin',
                'pos': 17,
                'time': '0:55:12.706000',
                'time_f': '2018-05-24 13:11:24.354000',
                'time_s': '2018-05-24 12:16:11.648000'},
        'SVF': {'car': 'FERRARI',
                'fullname': 'Sebastian Vettel',
                'pos': 15,
                'time': '1:01:04.415000',
                'time_f': '2018-05-24 13:04:03.332000',
                'time_s': '2018-05-24 12:02:58.917000'},
        'SVM': {'car': 'MCLAREN RENAULT',
                'fullname': 'Stoffel Vandoorne',
                'pos': 13,
                'time': '1:01:12.463000',
                'time_f': '2018-05-24 13:19:50.198000',
                'time_s': '2018-05-24 12:18:37.735000'},
        'VBM': {'car': 'MERCEDES',
                'fullname': 'Valtteri Bottas',
                'pos': 14,
                'time': '1:01:12.434000',
                'time_f': '2018-05-24 13:01:12.434000',
                'time_s': '2018-05-24 12:00:00'}})
    cases = [
        ('/api/v1/report/', 200, out1),
        ('/api/v1/report/?driver_id=SVF', 200, out2),
        ('/api/v1/report/?order=desc', 200, out3),
    ]

    def factory(case_number):
        return cases[case_number]

    return factory


@pytest.fixture()
def cases_xml():
    xml_out1 = b'<?xml version="1.0" ?><response><LHM><car>MERCEDES</car><fullname>Lewis Hamilton</fullname><pos>1</pos><time>0:53:12.460000</time><time_f>2018-05-24 13:11:32.585000</time_f><time_s>2018-05-24 12:18:20.125000</time_s></LHM><EOF><car>FORCE INDIA MERCEDES</car><fullname>Esteban Ocon</fullname><pos>2</pos><time>0:54:13.028000</time><time_f>2018-05-24 13:12:11.838000</time_f><time_s>2018-05-24 12:17:58.810000</time_s></EOF><SSW><car>WILLIAMS MERCEDES</car><fullname>Sergey Sirotkin</fullname><pos>3</pos><time>0:55:12.706000</time><time_f>2018-05-24 13:11:24.354000</time_f><time_s>2018-05-24 12:16:11.648000</time_s></SSW><DRR><car>RED BULL RACING TAG HEUER</car><fullname>Daniel Ricciardo</fullname><pos>4</pos><time>0:57:12.013000</time><time_f>2018-05-24 13:11:24.067000</time_f><time_s>2018-05-24 12:14:12.054000</time_s></DRR><SVF><car>FERRARI</car><fullname>Sebastian Vettel</fullname><pos>5</pos><time>1:01:04.415000</time><time_f>2018-05-24 13:04:03.332000</time_f><time_s>2018-05-24 12:02:58.917000</time_s></SVF><VBM><car>MERCEDES</car><fullname>Valtteri Bottas</fullname><pos>6</pos><time>1:01:12.434000</time><time_f>2018-05-24 13:01:12.434000</time_f><time_s>2018-05-24 12:00:00</time_s></VBM><SVM><car>MCLAREN RENAULT</car><fullname>Stoffel Vandoorne</fullname><pos>7</pos><time>1:01:12.463000</time><time_f>2018-05-24 13:19:50.198000</time_f><time_s>2018-05-24 12:18:37.735000</time_s></SVM><KRF><car>FERRARI</car><fullname>Kimi R\xd0\x93\xc2\xa4ikk\xd0\x93\xc2\xb6nen</fullname><pos>8</pos><time>1:01:12.639000</time><time_f>2018-05-24 13:04:13.889000</time_f><time_s>2018-05-24 12:03:01.250000</time_s></KRF><FAM><car>MCLAREN RENAULT</car><fullname>Fernando Alonso</fullname><pos>9</pos><time>1:01:12.657000</time><time_f>2018-05-24 13:14:17.169000</time_f><time_s>2018-05-24 12:13:04.512000</time_s></FAM><CLS><car>SAUBER FERRARI</car><fullname>Charles Leclerc</fullname><pos>10</pos><time>1:01:12.829000</time><time_f>2018-05-24 13:10:54.750000</time_f><time_s>2018-05-24 12:09:41.921000</time_s></CLS><SPF><car>FORCE INDIA MERCEDES</car><fullname>Sergio Perez</fullname><pos>11</pos><time>1:01:12.848000</time><time_f>2018-05-24 13:13:13.883000</time_f><time_s>2018-05-24 12:12:01.035000</time_s></SPF><RGH><car>HAAS FERRARI</car><fullname>Romain Grosjean</fullname><pos>12</pos><time>1:01:12.930000</time><time_f>2018-05-24 13:06:27.441000</time_f><time_s>2018-05-24 12:05:14.511000</time_s></RGH><PGS><car>SCUDERIA TORO ROSSO HONDA</car><fullname>Pierre Gasly</fullname><pos>13</pos><time>1:01:12.941000</time><time_f>2018-05-24 13:08:36.586000</time_f><time_s>2018-05-24 12:07:23.645000</time_s></PGS><CSR><car>RENAULT</car><fullname>Carlos Sainz</fullname><pos>14</pos><time>1:01:12.950000</time><time_f>2018-05-24 13:04:28.095000</time_f><time_s>2018-05-24 12:03:15.145000</time_s></CSR><NHR><car>RENAULT</car><fullname>Nico Hulkenberg</fullname><pos>15</pos><time>1:01:13.065000</time><time_f>2018-05-24 13:04:02.979000</time_f><time_s>2018-05-24 12:02:49.914000</time_s></NHR><BHS><car>SCUDERIA TORO ROSSO HONDA</car><fullname>Brendon Hartley</fullname><pos>16</pos><time>1:01:13.179000</time><time_f>2018-05-24 13:16:05.164000</time_f><time_s>2018-05-24 12:14:51.985000</time_s></BHS><MES><car>SAUBER FERRARI</car><fullname>Marcus Ericsson</fullname><pos>17</pos><time>1:01:13.265000</time><time_f>2018-05-24 13:05:58.778000</time_f><time_s>2018-05-24 12:04:45.513000</time_s></MES><LSW><car>WILLIAMS MERCEDES</car><fullname>Lance Stroll</fullname><pos>18</pos><time>1:01:13.323000</time><time_f>2018-05-24 13:07:26.834000</time_f><time_s>2018-05-24 12:06:13.511000</time_s></LSW><KMH><car>HAAS FERRARI</car><fullname>Kevin Magnussen</fullname><pos>19</pos><time>1:01:13.393000</time><time_f>2018-05-24 13:04:04.396000</time_f><time_s>2018-05-24 12:02:51.003000</time_s></KMH></response>'
    xml_out2 = b'<?xml version="1.0" ?><response><KMH><car>HAAS FERRARI</car><fullname>Kevin Magnussen</fullname><pos>1</pos><time>1:01:13.393000</time><time_f>2018-05-24 13:04:04.396000</time_f><time_s>2018-05-24 12:02:51.003000</time_s></KMH><LSW><car>WILLIAMS MERCEDES</car><fullname>Lance Stroll</fullname><pos>2</pos><time>1:01:13.323000</time><time_f>2018-05-24 13:07:26.834000</time_f><time_s>2018-05-24 12:06:13.511000</time_s></LSW><MES><car>SAUBER FERRARI</car><fullname>Marcus Ericsson</fullname><pos>3</pos><time>1:01:13.265000</time><time_f>2018-05-24 13:05:58.778000</time_f><time_s>2018-05-24 12:04:45.513000</time_s></MES><BHS><car>SCUDERIA TORO ROSSO HONDA</car><fullname>Brendon Hartley</fullname><pos>4</pos><time>1:01:13.179000</time><time_f>2018-05-24 13:16:05.164000</time_f><time_s>2018-05-24 12:14:51.985000</time_s></BHS><NHR><car>RENAULT</car><fullname>Nico Hulkenberg</fullname><pos>5</pos><time>1:01:13.065000</time><time_f>2018-05-24 13:04:02.979000</time_f><time_s>2018-05-24 12:02:49.914000</time_s></NHR><CSR><car>RENAULT</car><fullname>Carlos Sainz</fullname><pos>6</pos><time>1:01:12.950000</time><time_f>2018-05-24 13:04:28.095000</time_f><time_s>2018-05-24 12:03:15.145000</time_s></CSR><PGS><car>SCUDERIA TORO ROSSO HONDA</car><fullname>Pierre Gasly</fullname><pos>7</pos><time>1:01:12.941000</time><time_f>2018-05-24 13:08:36.586000</time_f><time_s>2018-05-24 12:07:23.645000</time_s></PGS><RGH><car>HAAS FERRARI</car><fullname>Romain Grosjean</fullname><pos>8</pos><time>1:01:12.930000</time><time_f>2018-05-24 13:06:27.441000</time_f><time_s>2018-05-24 12:05:14.511000</time_s></RGH><SPF><car>FORCE INDIA MERCEDES</car><fullname>Sergio Perez</fullname><pos>9</pos><time>1:01:12.848000</time><time_f>2018-05-24 13:13:13.883000</time_f><time_s>2018-05-24 12:12:01.035000</time_s></SPF><CLS><car>SAUBER FERRARI</car><fullname>Charles Leclerc</fullname><pos>10</pos><time>1:01:12.829000</time><time_f>2018-05-24 13:10:54.750000</time_f><time_s>2018-05-24 12:09:41.921000</time_s></CLS><FAM><car>MCLAREN RENAULT</car><fullname>Fernando Alonso</fullname><pos>11</pos><time>1:01:12.657000</time><time_f>2018-05-24 13:14:17.169000</time_f><time_s>2018-05-24 12:13:04.512000</time_s></FAM><KRF><car>FERRARI</car><fullname>Kimi R\xd0\x93\xc2\xa4ikk\xd0\x93\xc2\xb6nen</fullname><pos>12</pos><time>1:01:12.639000</time><time_f>2018-05-24 13:04:13.889000</time_f><time_s>2018-05-24 12:03:01.250000</time_s></KRF><SVM><car>MCLAREN RENAULT</car><fullname>Stoffel Vandoorne</fullname><pos>13</pos><time>1:01:12.463000</time><time_f>2018-05-24 13:19:50.198000</time_f><time_s>2018-05-24 12:18:37.735000</time_s></SVM><VBM><car>MERCEDES</car><fullname>Valtteri Bottas</fullname><pos>14</pos><time>1:01:12.434000</time><time_f>2018-05-24 13:01:12.434000</time_f><time_s>2018-05-24 12:00:00</time_s></VBM><SVF><car>FERRARI</car><fullname>Sebastian Vettel</fullname><pos>15</pos><time>1:01:04.415000</time><time_f>2018-05-24 13:04:03.332000</time_f><time_s>2018-05-24 12:02:58.917000</time_s></SVF><DRR><car>RED BULL RACING TAG HEUER</car><fullname>Daniel Ricciardo</fullname><pos>16</pos><time>0:57:12.013000</time><time_f>2018-05-24 13:11:24.067000</time_f><time_s>2018-05-24 12:14:12.054000</time_s></DRR><SSW><car>WILLIAMS MERCEDES</car><fullname>Sergey Sirotkin</fullname><pos>17</pos><time>0:55:12.706000</time><time_f>2018-05-24 13:11:24.354000</time_f><time_s>2018-05-24 12:16:11.648000</time_s></SSW><EOF><car>FORCE INDIA MERCEDES</car><fullname>Esteban Ocon</fullname><pos>18</pos><time>0:54:13.028000</time><time_f>2018-05-24 13:12:11.838000</time_f><time_s>2018-05-24 12:17:58.810000</time_s></EOF><LHM><car>MERCEDES</car><fullname>Lewis Hamilton</fullname><pos>19</pos><time>0:53:12.460000</time><time_f>2018-05-24 13:11:32.585000</time_f><time_s>2018-05-24 12:18:20.125000</time_s></LHM></response>'
    xml_out3 = b'<?xml version="1.0" ?><response><SVF><car>FERRARI</car><fullname>Sebastian Vettel</fullname><pos>1</pos><time>1:01:04.415000</time><time_f>2018-05-24 13:04:03.332000</time_f><time_s>2018-05-24 12:02:58.917000</time_s></SVF></response>'
    cases_xml = [
        ('/api/v1/report/', 200, xml_out1),
        ('/api/v1/report/?order=desc', 200, xml_out2),
        ('/api/v1/report/?driver_id=SVF', 200, xml_out3),
    ]

    def factory(case_number):
        return cases_xml[case_number]
    return factory
